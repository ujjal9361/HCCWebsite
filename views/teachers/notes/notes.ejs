<%RenderingURL=req.originalUrl%>

<%-include('../../components/header')%>
    <!-- Name of the teacher whose note it is -->
    <div><%=proprietaryTeacher.fullName%></div>
    <!-- When a user is not logged in user object will not be defined for them  -->
    <%if(req.user==null){%>
        <div>Nope Not allowed</div>
    <%}else{%>
            <div><%=(proprietaryTeacher.equals(req.user))?"You can add notes":"Nope! Not allowed"%></div>
    <%}%>
        <!-- We will show add button to everyone for test puroposes -->
        <a href="<%=`/teachers/${proprietaryTeacher._id}/notes/new`%>">Add note</a>


        <%notes.forEach((note)=>{%>
            <hr>
            <div>
                <%resolveSuffix=(num)=>num==1?"1st":num==2?"2nd":num==3?'3rd':`${num}th`%>
                <h3><%=note.title%></h3>
                <%if(note.description!=null){%>
                    <p><%=note.description%></p>
                <%}%>
                <p>Subject:<%=note.subject%></p>
                <p>Faculty:<%=note.faculty.toString()%></p>
                <p>Semster:<%=resolveSuffix(note.semester)%></p>
                <a href="<%=note.filePath%>" download>Download</a>
                <a href="<%=`/teachers/${note.publisherId}/notes/${note._id}?_method=PUT`%>">Edit this Note</a>
                <form action=<%=`/teachers/${note.publisherId}/notes/${note._id}?_method=DELETE`%> method="post">
                    <button type="submit">Delete this Note</button>
                </form>
            
            </div>
        <%})%>

   
<%-include('../../components/footer')%>



